<form id="editForm" onsubmit="handleUpdate(event)">
    <div class="modal fade" id="editModal">
        <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Data <b>Kegiatan</b> untuk Satuan Kerja Pelaksana <b
                            id="edit__info"></b></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body" x-data="{ tanggal_awal: '', tanggal_akhir: '', jumlah_hari_pelaksanaan: '' }">
                    <input type="hidden" id="edit__id" :value="$store.edit.data.id" />

                    <div class="mb-3">
                        <label for="edit__satker" class="col-form-label required">Satuan Kerja
                            Pelaksana:</label>
                        <select class="form-control select2" id="edit__satker" disabled>
                            <option value="{{ user.profile.satker.pk }}" selected>{{ user.profile.satker.nama_satker }}
                            </option>
                        </select>
                    </div>

                    <div class="row">
                        <div class="col-6">
                            <div class="mb-3">
                                <label for="edit__tanggal_awal" class="col-form-label required">Tanggal
                                    Awal:</label>
                                <input type="date" id="edit__tanggal_awal" class="form-control" x-model="$store.edit.data.tanggal_awal"
                                    @change="calculateDays" data-type="edit" :max="$store.edit.data.tanggal_akhir"
                                    x-model="tanggal_awal"
                                    x-ref="edit__tanggal_awal"
                                    required />
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="mb-3">
                                <label for="edit__tanggal_akhir" class="col-form-label required">Tanggal
                                    Akhir:</label>
                                <input type="date" id="edit__tanggal_akhir" class="form-control" x-model="$store.edit.data.tanggal_akhir"
                                    @change="calculateDays" data-type="edit" x-ref="edit__tanggal_akhir"
                                    x-model="tanggal_akhir"
                                    :min="$store.edit.data.tanggal_awal" />
                            </div>
                        </div>
                    </div>

                    <label for="edit__tanggal_helpers" class="col-form-label text-important">Jumlah Hari Pelaksanaan
                        Kerja akan digenerate secara <b>otomatis</b> oleh sistem berdasarkan inputan dari <b>Tanggal
                            Awal</b> dan <b>Tanggal Akhir</b>.</label>

                    <div class="mb-3">
                        <label for="edit__jumlah_hari_pelaksanaan" class="col-form-label required">Jumlah
                            Hari Pelaksanaan Kerja:</label>
                        <input type="text" class="form-control" id="edit__jumlah_hari_pelaksanaan" :value="$store.edit.data.jumlah_hari_pelaksanaan"
                        x-model="jumlah_hari_pelaksanaan"
                            disabled readonly />
                    </div>

                    <div class="mb-3">
                        <label for="edit__satker_target" class="col-form-label required">Satuan Kerja
                            Target:</label>
                        <select class="form-control select2" id="edit__satker_target" required>
                            <option value="" selected disabled>--Pilih Satuan Kerja Target--</option>
                            {% for item in satker %}
                            <option value="{{ item.pk }}">{{ item.nama_satker }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="edit__jumlah_peserta" class="col-form-label required">Jumlah Peserta:</label>

                        <div class="input-group input-group-merge">
                            <input type="number" class="form-control" id="edit__jumlah_peserta" maxlength="3" required :value="$store.edit.data.jumlah_peserta" />
                            <span class="input-group-text">orang</span>
                        </div>
                    </div>

                    <hr class="mx-n4">

                    <!-- Rincian Hasil -->
                    <div class="mb-3">
                        <label for="pelaksanaan" class="col-form-label required text-light">Rincian Hasil Pelaksanaan
                            Program Pemberdayaan Alternatif Pada Satker Target:</label>

                        <div class="mb-3">
                            <label for="edit__tujuan" class="col-form-label required">Tujuan:</label>
                            <textarea class="form-control" id="edit__tujuan" :value="$store.edit.data.tujuan" required></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="edit__kendala" class="col-form-label required">Hambatan
                                Kendala:</label>

                            <div class="form-check mt-3">
                                <input class="form-check-input" type="radio" name="edit__kendala_ketersediaan"
                                    id="edit__kendala_ketersediaan_yes" @click="$store.edit.state.kendala.show_keterangan = true, $store.edit.data.kendala = ''" :checked="$store.edit.state.kendala.show_keterangan" />
                                <label class="form-check-label" for="edit__kendala_ketersediaan_yes">Ada, sebutkan
                                    ...</label>
                            </div>

                            <div class="ps-4">
                                <textarea class="form-control my-3" id="edit__kendala_yes_keterangan"
                                    name="edit__kendala_yes_keterangan" x-show="$store.edit.state.kendala.show_keterangan"
                                    @change="$store.edit.data.kendala = 'Ada, ' + $el.value;" :value="$store.edit.data.kendala"
                                    :required="$store.edit.state.kendala.show_keterangan"></textarea>
                            </div>

                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="edit__kendala_ketersediaan"
                                    id="edit__kendala_ketersediaan_no"
                                    @click="$store.edit.state.kendala.show_keterangan = false; $store.edit.data.kendala = 'Tidak'"
                                    :checked="!$store.edit.state.kendala.show_keterangan"
                                    />
                                <label class="form-check-label" for="edit__kendala_ketersediaan_no">Tidak</label>
                            </div>

                            <input type="hidden" id="edit__kendala" :value="$store.edit.data.kendala" />
                        </div>

                        <div class="mb-3">
                            <label for="edit__kesimpulan" class="col-form-label required">Kesimpulan:</label>
                            <textarea class="form-control" id="edit__kesimpulan" :value="$store.edit.data.kesimpulan" required></textarea>
                        </div>

                    </div>

                    <hr class="mx-n4">

                    <div class="mb-3">
                        <label for="edit__tindak_lanjut" class="col-form-label required">Tindak Lanjut:</label>
                        
						<div class="form-check mt-3">
                            <input class="form-check-input" type="radio" name="edit__tindak_lanjut_ketersediaan" id="edit__tindak_lanjut_ketersediaan_yes" value="yes" :checked="$store.edit.state.tindak_lanjut.yes_show_keterangan"
                                @click="$store.edit.state.tindak_lanjut.yes_show_keterangan = true; $store.edit.state.tindak_lanjut.no_show_container = false; $store.edit.data.tindak_lanjut = ''" />
                            <label class="form-check-label" for="edit__tindak_lanjut_ketersediaan_yes">Ada, sebutkan ...</label>
                        </div>
                    
                        <div class="ps-4">
                            <textarea class="form-control my-3" id="edit__tindak_lanjut_yes_keterangan" x-show="$store.edit.state.tindak_lanjut.yes_show_keterangan" @change="$store.edit.data.tindak_lanjut = 'Ada, ' + $el.value;"  :required="$store.edit.state.tindak_lanjut.yes_show_keterangan" :value="$store.edit.data.tindak_lanjut"></textarea>
                        </div>
                    
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="edit__tindak_lanjut_ketersediaan" id="edit__tindak_lanjut_ketersediaan_no" value="no"
                            :checked="$store.edit.state.tindak_lanjut.no_show_container"
                            @click="$store.edit.state.tindak_lanjut.yes_show_keterangan = false; $store.edit.state.tindak_lanjut.no_show_container = true" />
                            <label class="form-check-label" for="edit__tindak_lanjut_ketersediaan_no">Tidak</label>
                        </div>
                    
                        <div id="create_tindak_lanjut_no_container" class="ps-4 mt-1" x-show="$store.edit.state.tindak_lanjut.no_show_container">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="edit__tindak_lanjut_ketersediaan_no" id="edit__tindak_lanjut_ketersediaan_no_pemblokiran" value="Pemblokiran"
                                    @click="$store.edit.data.tindak_lanjut = 'Tidak, Pemblokiran', $store.edit.state.tindak_lanjut.no_show_container_lainnya = false;"
                                    :checked="$store.edit.data.tindak_lanjut.includes('Pemblokiran')"
                                    />

                                <label class="form-check-label" for="edit__tindak_lanjut_ketersediaan_no_pemblokiran">A. Pemblokiran</label>
                            </div>
                    
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="edit__tindak_lanjut_ketersediaan_no" id="edit__tindak_lanjut_ketersediaan_no_anggaran"
                                    value="Anggaran tidak ada alokasi kegiatan" @click="$store.edit.data.tindak_lanjut = 'Tidak, Anggaran tidak ada alokasi kegiatan', $store.edit.state.tindak_lanjut.no_show_container_lainnya = false;"
                                    :checked="$store.edit.data.tindak_lanjut.includes('Anggaran tidak ada alokasi kegiatan')"

                                    />
                                <label class="form-check-label" for="edit__tindak_lanjut_ketersediaan_no_anggaran">B. Anggaran tidak ada alokasi kegiatan</label>
                            </div>
                    
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="edit__tindak_lanjut_ketersediaan_no" id="edit__tindak_lanjut_ketersediaan_no_lainnya"
                                    value="Lainnya" @click="$store.edit.state.tindak_lanjut.no_show_container_lainnya = true; $store.edit.data.tindak_lanjut = ''"
                                    :checked="!$store.edit.data.tindak_lanjut.includes('Anggaran tidak ada alokasi kegiatan') && !$store.edit.data.tindak_lanjut.includes('Pemblokiran') && !$store.edit.data.tindak_lanjut.includes('Ada')"
                                    />
                                <label class="form-check-label" for="edit__tindak_lanjut_ketersediaan_no_lainnya">C. Lainnya, sebutkan ...</label>
                            </div>
                    
                            <div class="ps-4">
                                <textarea class="form-control mt-3" id="edit__tindak_lanjut_ketersediaan_no_keterangan" x-show="$store.edit.state.tindak_lanjut.no_show_container_lainnya" @change="$store.edit.data.tindak_lanjut = 'Tidak, ' + $el.value"   :required="$store.edit.state.tindak_lanjut.no_show_container_lainnya" :value="$store.edit.data.tindak_lanjut"></textarea>
                            </div>
                        </div>
                    
                        <input type="hidden" id="edit__tindak_lanjut" :value="$store.edit.data.tindak_lanjut" />

                    </div>
                    <div class="mb-3">
                        <label for="edit__dokumentasi" class="col-form-label optional">Dokumentasi:</label>
                        <input type="file" class="form-control" id="edit__dokumentasi"
                            accept=".csv, .xlsx, .pdf, docx."></input>

                        <div class="mt-2">
                            <span class="text-important">Kosongkan <b>bagian</b> ini jika tidak ingin mengganti file
                                dokumentasi.</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-label-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-xmark me-2"></i>Tutup</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save me-2"></i>
                        Simpan</button>
                </div>
            </div>
        </div>
    </div>
</form>